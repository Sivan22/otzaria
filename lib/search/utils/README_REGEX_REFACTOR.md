# ארגון מחדש של רגקסים לחיפוש

## מה השתנה?

הרגקסים שהיו מפוזרים במקומות שונים במערכת רוכזו בקובץ אחד: `regex_patterns.dart`

## קבצים שהושפעו:

### 1. `lib/search/utils/regex_patterns.dart` (חדש)
- **מטרה**: מרכז את כל הרגקסים במקום אחד
- **תוכן**: כל הרגקסים הבסיסיים ופונקציות ליצירת רגקסים דינמיים

### 2. `lib/search/utils/hebrew_morphology.dart` (עודכן)
- **שינוי**: הפונקציות עכשיו קוראות לרגקסים מהקובץ המרכזי
- **יתרון**: הקוד נשאר תואם לאחור אבל משתמש ברגקסים מרכזיים

### 3. `lib/utils/text_manipulation.dart` (עודכן)
- **שינוי**: רגקסים להסרת HTML, ניקוד וטעמים עברו לקובץ המרכזי
- **יתרון**: פחות כפילויות וקל יותר לתחזוקה

### 4. `lib/search/models/search_terms_model.dart` (עודכן)
- **שינוי**: רגקס לפיצול מילים עבר לקובץ המרכזי
- **יתרון**: עקביות בפיצול מילים בכל המערכת

### 5. `lib/search/search_repository.dart` (עודכן)
- **שינוי**: רגקסים מורכבים לחיפוש מתקדם עברו לפונקציות מרכזיות
- **יתרון**: קוד יותר נקי וקל לקריאה

### 6. `lib/search/view/enhanced_search_field.dart` (עודכן)
- **שינוי**: רגקס לסינון רווחים עבר לקובץ המרכזי
- **יתרון**: עקביות בסינון קלט

## יתרונות הארגון החדש:

### 🎯 תחזוקה קלה יותר
- כל הרגקסים במקום אחד
- קל למצוא ולעדכן רגקסים
- פחות סיכוי לטעויות

### 🔄 עקביות
- כל חלקי המערכת משתמשים באותם רגקסים
- אין כפילויות של רגקסים דומים
- שינוי ברגקס משפיע על כל המערכת

### 🧪 בדיקות טובות יותר
- קל יותר לבדוק רגקסים במקום מרכזי
- פחות מקומות לבדוק כשיש בעיה
- קל יותר לכתוב טסטים

### 📚 תיעוד טוב יותר
- כל הרגקסים מתועדים במקום אחד
- הסברים על מטרת כל רגקס
- דוגמאות שימוש

## איך להשתמש:

```dart
import 'package:otzaria/search/utils/regex_patterns.dart';

// שימוש ברגקס בסיסי
final words = text.split(SearchRegexPatterns.wordSplitter);

// יצירת רגקס דינמי
final pattern = SearchRegexPatterns.createPrefixPattern('מילה');

// בדיקת תנאים
if (SearchRegexPatterns.hasGrammaticalPrefix(word)) {
  // טיפול במילה עם קידומת
}
```

## הערות חשובות:

1. **תאימות לאחור**: כל הפונקציות הקיימות ממשיכות לעבוד
2. **ביצועים**: אין השפעה על ביצועים, רק ארגון טוב יותר
3. **הרחבות עתידיות**: קל יותר להוסיף רגקסים חדשים

## עדכון חשוב - לוגיקת קידומות + סיומות

### הבעיה שנפתרה:
כאשר משתמש בחר גם "קידומות" וגם "סיומות", המערכת לא מצאה תוצאות כמו שצריך.
לדוגמה: חיפוש "ראשי" עם קידומות+סיומות לא מצא "בראשית".

### הפתרון:
כאשר משתמש בוחר גם קידומות וגם סיומות יחד, המערכת עכשיו משתמשת בלוגיקה של "חלק ממילה".
זה הגיוני כי קידומות+סיומות יחד בעצם אומר "חפש את המילה בכל מקום בתוך מילה אחרת".

### דוגמה:
- חיפוש: "ראשי" 
- אפשרויות: קידומות ✓ + סיומות ✓
- תוצאה: ימצא "בראשית" כי "ראשי" נמצא בתוך המילה

## מה הלאה?

בעתיד אפשר להוסיף:
- רגקסים לחיפוש מתקדם יותר
- אופטימיזציות לביצועים
- תמיכה בשפות נוספות
- כלים לבדיקת רגקסים